(()=>{customElements.define("joomla-tooltip",class extends HTMLElement{static get observedAttributes(){return["position","action"]}get position(){return this.getAttribute("position")||"top"}set position(t){return this.setAttribute("position",t)}get action(){return this.getAttribute("action")||"hover"}set action(t){return this.getAttribute("action",t)}connectedCallback(){(!this.position||this.position&&-1===["top","bottom","left","right"].indexOf(this.position))&&(this.position="top"),this.innerContents=[...this.querySelectorAll("joomla-tooltip > *")],this.innerContents.forEach(t=>{"hover"===this.action?(t.addEventListener("mouseenter",e=>{this.generateTooltip(t)}),t.addEventListener("mouseleave",t=>{document.querySelectorAll(".joomla-tooltip").forEach(t=>{document.body.removeChild(t)})})):t.addEventListener("click",e=>{this.generateTooltip(t)})})}generateTooltip(t){const e=document.createElement("span");e.classList.add("joomla-tooltip",`${this.position}`);const i=t.hasAttribute("tooltip-text")?t.getAttribute("tooltip-text"):t.innerText;e.appendChild(document.createTextNode(i));const{firstChild:n}=document.body;n.parentNode.insertBefore(e,n);const o=t.getBoundingClientRect(),s=e.getBoundingClientRect();switch(this.position){case"right":e.style.left=`${Math.round(o.left+o.width)}px`,e.style.top=`${Math.round(o.top)}px`;break;case"bottom":case"left":break;default:e.style.top=`${o.top-(s.height+5)}px`,e.style.left=`${o.left}px`}}disconnectedCallback(){this.querySelector("button").removeEventListener("click",this.showTip,!0)}showTip(){const t=this;document.addEventListener("click",e=>{this.btnElement!==e.target&&(this.spanElement.innerHTML="",t.removeEventListener("keydown",this))}),document.addEventListener("keydown",e=>{9===(e.keyCode||e.which)&&(this.spanElement.innerHTML="",t.removeEventListener("keydown",this))}),this.spanElement.innerHTML="",this.spanElement.innerHTML=`<span class="toggletip-bubble ${this.position}">${this.tip}</span>`}dispatchCustomEvent(t){const e=new CustomEvent(t,{bubbles:!0,cancelable:!0});e.relatedTarget=this,this.dispatchEvent(e),this.removeEventListener(t,this)}})})();